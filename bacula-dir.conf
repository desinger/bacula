Director {                            # define myself
  Name = rufus-dir
  QueryFile = "/etc/bacula/query.sql"
  WorkingDirectory = "/opt/bacula/working"
  PidDirectory = "/opt/bacula/working"
  Password = "1"
}
##############################################################################
# Define the backup Job
Job {
  Name = "NightlySave"
  Type = Backup
  Level = Incremental                 # default
  Client= rufus-fd
  FileSet="Full Set"
  Schedule = "WeeklyCycle"
  Storage = File
  Messages = Standard
  Pool = Default
}

Job {
  Name = "Fullbackup"
  Type = Backup
  Level = Full                # default
  Client= rufus-fd
  FileSet="Full Set"		#koe da backup definirano v FILESET
  Schedule = "WeeklyCycle"
  Storage = File
  Messages = Standard
  Pool = Default
}
Job {
  Name = "Restore"
  Type = Restore
  Client= rufus-fd
  FileSet="Full Set"
  Where = /bacula/restore
  Storage = File
  Messages = Standard
  Pool = Default
}

Job {
  Name = "Restore stanimir"
  Type = Restore
  Client= stanimir
  FileSet="Full Set"
  Where = /bacula/restore
  Storage = File
  Messages = Standard
  Pool = Default
}
Job {
  Name = "NightlySave stanimir"
  Type = Backup
  Level = Incremental                 # default
  Client= stanimir
  FileSet="Full Set"
  Schedule = "WeeklyCycle"
  Storage = File
  Messages = Standard
  Pool = Default
}

#####################################################################################   
# List of files to be backed up
FileSet {
  Name = "Full Set"
  Include {
   Options { Compression=GZIP
	      signature=SHA1
	      Sparse = yes
	    }
  File = /home/stanimir/bacula
	    }
  Exclude {}
	 }
#All local partition backup -klF uts 
#pokazva failovata sistema 
#ext2, jfs, ntfs, proc, reiserfs, xfs, usbdevfs, sysfs, smbfs, iso9660.
#
    FileSet {
  Name = "All local partitions"
  Include {
    Options { signature=SHA1; onefs=yes; compression=GZIP; }
    File = "\\|bash -c \"df -klF ufs | tail +2 | awk '{print \$6}'\""
  }
}
##
FileSet {
  Name = "AllPictures"

  Include {

    File  = "C:/Documents and Settings"

    Options {
      signature = SHA1
      verify = s1
      IgnoreCase = yes

      # Include all users' directories so we reach the inner ones.  Unlike a
      # WildDir pattern ending in *, this RegExDir only matches the top-level
      # directories and not any inner ones.
      RegExDir = "^C:/Documents and Settings/[^/]+$"

      # Ditto all users' My Documents directories.
      WildDir = "C:/Documents and Settings/*/My Documents"

      # Ditto all users' My Documents/My Pictures directories.
      WildDir = "C:/Documents and Settings/*/My Documents/My Pictures"

      # Include the contents of the My Documents/My Pictures directories and
      # any subdirectories.
      Wild = "C:/Documents and Settings/*/My Documents/My Pictures/*"
    }

    Options {
      Exclude = yes
      IgnoreCase = yes

      # Exclude everything else, in particular any files at the top level and
      # any other directories or files in the users' directories.
      Wild = "C:/Documents and Settings/*"
    }
  }
}
##
FileSet {
  Name = "RawPartition"
  Include {
    Options { sparse=yes }
    File = /dev/hda2
  }
}







######################################################################################
#
# When to do the backups
Schedule {
  Name = "WeeklyCycle"
  Run = level=Full sun at 20:00
  Run = level=Incremental mon-sat at 20:00
}

################################################################################
# Client (File Services) to backup
Client {
  Name = rufus-fd
  Address = 192.168.2.119 	#nemoje da e localhost trqbva da e 127.0.0.1
  Catalog = MyCatalog
  Password = "1"
  FDPort = 9102
  File Retention = 60d      # sixty day file retention
  Job Retention = 1y        # 1 year Job retention
  AutoPrune = yes           # Auto apply retention periods
}

Client {
  Name = stanimir
  Address = 192.168.2.118
  Catalog = MyCatalog
  Password = "1"
  File Retention = 60d      # sixty day file retention
  Job Retention = 1y        # 1 year Job retention
  AutoPrune = yes           # Auto apply retention periods
}

#################################################################################
# Definition of file storage device
#moje da e i drug komputar
Storage {
  Name = File
  Address = test #nemoje da e local host samo ip ili domain name
  SDPort = 9103
  Password = "1"
  Device = FileStorage		# same as Device NAME in Storage daemon bacula-sd.conf
  Media Type = File		# same as MediaType in Storage daemon	bacula-sd.conf
}

############################################################################################
#nastroika na bazata danni 
# Generic catalog service
Catalog {
  Name = MyCatalog
  dbname = bacula; user = bacula; password = ""
}
#Catalog
#{
#  Name = SQLite
#  dbname = bacula;
#  user = bacula;
#  password = ""                       # no password = no security
#}
#or for a Catalog on another machine:
#
#Catalog
#{
#  Name = MySQL
#  dbname = bacula
#  user = bacula
#  password = ""/var/run/bacula
#  DB Address = remote.acme.com
#  DB Port = 1234
#}


##################################################################################
# Reasonable message delivery -- send most everything to
#   the email address and to the console
Messages {
  Name = Standard
  mail = root@localhost = all, !skipped, !terminate
  operator = root@localhost = mount
  console = all, !skipped, !saved
}
######################################################################################    
# Default pool definition
#
Pool {
  Name = Default	#ime na storage
  Pool Type = Backup	#vinagi e backup
  Label Format = "Backup-${Year}-${Month:p/2/0/r}-${Day:p/2/0/r}-${Hour}-${Minute}-${Second}"
  AutoPrune = yes
  Recycle = yes
}
##################################################################
# Restricted console used by tray-monitor to get the status of the director
#
Console {
  Name = Monitor
  Password = "1"
  CommandACL = status, .status
}
